# Настройка Prisma для промокодов (SQLite)

## 1. SQLite уже встроен

SQLite уже встроен в большинство систем, дополнительная установка не требуется.

## 2. База данных создается автоматически

База данных `dev.db` будет создана автоматически при первом запуске.

## 3. Применение схемы к базе данных

```bash
# Примените схему к базе данных
bun run db:push

# Или создайте миграцию
bunx prisma migrate dev --name init
```

## 4. Заполнение базы данных тестовыми промокодами

```bash
# Запустите сидирование
bun run db:seed
```

## 5. Проверка работы

После настройки вы можете проверить API промокодов:

```bash
# Проверьте промокод WELCOME10
curl "http://localhost:3000/api/promocodes?code=WELCOME10"
```

## Доступные промокоды для тестирования:

- `WELCOME10` - скидка 10%
- `SUMMER20` - скидка 20%
- `NEWYEAR25` - скидка 25%
- `FLASH30` - скидка 30% (лимит исчерпан)
- `EXPIRED15` - скидка 15% (истек)

## Полезные команды Prisma:

```bash
# Генерация клиента
bun run db:generate

# Просмотр данных в базе
bunx prisma studio

# Сброс базы данных
bunx prisma migrate reset

# Создание новой миграции
bunx prisma migrate dev --name add_new_field
```

## Структура файлов:

```
prisma/
├── schema.prisma    # Схема базы данных
├── seed.ts         # Скрипт для заполнения данными
└── dev.db          # Файл базы данных SQLite (создается автоматически)
```
